<common-top-bar active="city"></common-top-bar>

<div class="modal fade" id="DailyInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <daily-popup [info]="dailyCo"></daily-popup>
  </div>
</div>
<div class="modal fade" id="ArmyInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <army-popup [info]="armyInfo"></army-popup>
  </div>
</div>
<div class="modal fade" id="ArmySummary" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <army-summary-popup></army-summary-popup>
  </div>
</div>
<div class="modal fade" id="BuildingInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <construction-popup [info]="buildingInfo"></construction-popup>
  </div>
</div>
<div class="modal fade" id="BuildingSummary" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <construction-summary-popup></construction-summary-popup>
  </div>
</div>
<div class="modal fade" id="TreasureInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <treasure-popup [info]="treasureInfo"></treasure-popup>
  </div>
</div>

<div class="modal fade" id="DivineBonusInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <divinebonus-info-popup [divineBonus]="divinBonusSelected">
    </divinebonus-info-popup>
  </div>
</div>
<div class="modal fade" id="DivineBonusList" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <divinebonus-list-popup [divineBonus]="divinBonusListSelected">
    </divinebonus-list-popup>
  </div>
</div>
<div class="modal fade" id="DivineBonusHelp" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <divinebonus-help-popup></divinebonus-help-popup>
  </div>
</div>

<div class="modal fade" id="SuccessInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <success-info-popup [successType]="success"></success-info-popup>
  </div>
</div>

<div class="modal fade" id="Temple1Info" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <temple1-popup></temple1-popup>
  </div>
</div>
<div class="modal fade" id="Temple2Info" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <temple2-popup></temple2-popup>
  </div>
</div>
<div class="modal fade" id="Temple3Info" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <temple3-popup></temple3-popup>
  </div>
</div>
<div class="modal fade" id="Temple4Info" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <temple4-popup></temple4-popup>
  </div>
</div>
<div class="modal fade" id="TempleInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <temple-info-popup [temple]="templeSelected"></temple-info-popup>
  </div>
</div>
<div class="modal fade" id="TempleChangeInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <temple-change-info-popup></temple-change-info-popup>
  </div>
</div>

<div class="modal fade" id="QuestsInfo" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <quests-info-popup></quests-info-popup>
  </div>
</div>

<div class="col-lg-10 col-md-10 col-sm-12 col-xs-12 main">
  <div class="container">
    <div class="row">
      <div class="col-xl-6 col-block-half">
        <div class="card">
          <div class="card-header">
            <span translate>General</span>
            <span data-bs-toggle="modal" data-bs-target="#DailyInfo"
                  *ngIf="dailCo() > 0 && dailyCoCheck == 1"
                  id="DailyCoCheckOpen"
                  role="button" translate>
              <ic-icon [icIcon]="questionCircle"></ic-icon>
            </span>
          </div>
          <div class="card-body d-flex align-items-center">
            <div class="flex-grow-1 text-center">
              <div *ngIf="user.getLevel() < 10">
                <a [routerLink]="['/quests']">
                  <strong translate>Quests</strong><strong translate>:</strong> 
                  {{ user.getQuest() }}/{{ user.getQuestMax() }}
                </a>
              </div>
              <div *ngIf="user.getLevel() >= 1">
                <strong translate>Quest progress</strong>
                <strong translate>:</strong>
                <ic-icon [icIcon]="questionCircle"
                         data-bs-toggle="modal" data-bs-target="#QuestsInfo"
                         role="button"></ic-icon>
                <div class="progress" role="button" [routerLink]="['/quests']">
                  <div class="progress-bar bg-success" role="progressbar" aria-valuenow="0"
                       aria-valuemin="0" aria-valuemax="100"
                       [ngStyle]="{'width.%': 100*user.getPropertyNb('quest_step')/7 }"></div>
                  <div class="progress-text">
                    {{ user.getPropertyNb('quest_step') }}/{{7}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div *ngIf="user.getLevel() >= 1 || user.getQuest() >= 7"
           class="col-xl-6 col-block-half">
        <div class="card">
          <div class="card-header">
            <span translate>Divine Bonus</span>
            
            <span data-bs-toggle="modal" data-bs-target="#DivineBonusList"
                  role="button" *ngIf="divineBonus.length > 0"
                  class="text-warning" (click)="divineBonusReset()">
              <ic-icon [icIcon]="cloud"></ic-icon>
            </span>
            <span data-bs-toggle="modal" data-bs-target="#DivineBonusHelp"
                  role="button" translate>
              <ic-icon [icIcon]="questionCircle"></ic-icon>
            </span>
          </div>
          <div class="card-body no-padding text-center" *ngIf="divineBonus.length == 0">
            <br/>
            <strong translate>Ongoing streak:</strong>
            {{ user.getPropertyNb('nbdays') }} <span translate>Day(s)</span>
            <div>
              {{ 'Next goal: { value } Days' | translate: { value: user.getGoalDays() | number:'': this.translate.currentLang } }}
            </div>
          </div>
          <div class="card-body no-padding" *ngIf="divineBonus.length > 0">
            <div *ngFor="let bonus of divineBonus" role="button"
                 class="frame frame-db"
                 data-bs-toggle="modal" data-bs-target="#DivineBonusInfo"
                 (click)="selectDivinBonus(bonus)">
              <ew-icon name="{{ EwIcon.getDivineBonus(bonus.bonus_id) }}"></ew-icon>
              <div class="badge bg-secondary">{{ bonus.nb }}</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-xl-6 col-block-half"
           *ngIf="user.getLevel() >= 1 || user.getPropertyNb('spartan') > 0">
        <div class="card">
          <div class="card-header">
            <span translate>
              Army
            </span>
            <span data-bs-toggle="modal" data-bs-target="#ArmySummary"
                  role="button" translate>
              <ic-icon [icIcon]="questionCircle"></ic-icon>
            </span>
          </div>
          <div class="card-body no-padding">
            <div *ngFor="let army of user.getArmy()">
              <div class="frame frame-20" role="button"
                   [ngClass]="{'level-quest': levelQuest(army.code)}"
                   data-bs-toggle="modal" data-bs-target="#ArmyInfo"
                   (click)="selectArmy(army.code)"
                   title="{{ army.name | translate }}"
                   *ngIf="armyDisplay(army)">
                <ew-icon name="{{ army.code }}"></ew-icon>
                <div class="badge bg-secondary"
                     [ngClass]="{'badge-mini': user.getPropertyNb(army.code) > 1000000000}">
                  {{ user.getPropertyNb(army.code) | number:'': this.translate.currentLang }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-xl-6 col-block-half">
        <div class="card">
          <div class="card-header">
            <span translate>Buildings</span>
            <span data-bs-toggle="modal" data-bs-target="#BuildingSummary"
                  role="button" translate>
              <ic-icon [icIcon]="questionCircle"></ic-icon>
            </span>
          </div>
          <div class="card-body no-padding">
            <div class="frame frame-20" (click)="selectTreasure()"
                 data-bs-toggle="modal" data-bs-target="#TreasureInfo"
                 *ngIf="user.getLevel() >= 1 || user.getQuest() >= 11"
                 [ngClass]="{'level-quest': levelQuest('treasure')}"
                 title="{{ 'Treasure' | translate }}" role="button">
              <ew-icon name="treasure"></ew-icon>
            </div>
            
            <div *ngFor="let building of user.getBuildings()"
                 class="frame frame-20" role="button"
                 [ngClass]="{'level-quest': levelQuest(building.code)}"
                 data-bs-toggle="modal" data-bs-target="#BuildingInfo"
                 (click)="selectBuilding(building.code)"
                 title="{{ building.name | translate }}">
              <ew-icon name="{{ building.code }}"></ew-icon>
              <div class="badge bg-secondary">
                {{ user.getPropertyNb(building.code) | number:'': this.translate.currentLang }}
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-xl-6 col-block-half"
           *ngIf="user.getLevel() >= 3 ||Â (user.getLevel() == 2 && user.getQuest() >= 11)">
        <div class="card">
          <div class="card-header">
            Temples
          </div>
          <div class="card-body no-padding" id="templesBlock">
            <!-- Temple informations -->
            <div class="frame frame-20" role=""
                 *ngIf="user.getPropertyNb('hermes') == 1"
                 (click)="selectTemples(1)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Hermes' | translate}}" >
              <ew-icon name="hermes"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('apollo') == 1"
                 (click)="selectTemples(2)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Apollo' | translate}}" >
              <ew-icon name="apollo"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('demeter') == 1"
                 (click)="selectTemples(3)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Demeter' | translate}}" >
              <ew-icon name="demeter"></ew-icon>
            </div>
            
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('ares') == 1"
                 (click)="selectTemples(4)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Ares' | translate}}" >
              <ew-icon name="ares"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('athena') == 1"
                 (click)="selectTemples(5)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Athena' | translate}}" >
              <ew-icon name="athena"></ew-icon>
            </div>
            
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('artemis') == 1"
                 (click)="selectTemples(6)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Artemis' | translate}}" >
              <ew-icon name="artemis"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('dionysus') == 1"
                 (click)="selectTemples(8)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Dionysus' | translate}}" >
              <ew-icon name="dionysus"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('hephaestus') == 1"
                 (click)="selectTemples(7)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Hephaestus' | translate}}" >
              <ew-icon name="hephaestus"></ew-icon>
            </div>
            
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('zeus') == 1"
                 (click)="selectTemples(9)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Zeus' | translate}}">
              <ew-icon name="zeus"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('hades') == 1"
                 (click)="selectTemples(10)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Hades' | translate}}">
              <ew-icon name="hades"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.getPropertyNb('poseidon') == 1"
                 (click)="selectTemples(11)" role="button"
                 data-bs-toggle="modal" data-bs-target="#TempleInfo"
                 title="{{'Poseidon' | translate}}">
              <ew-icon name="poseidon"></ew-icon>
            </div>
            
            <!-- Frames to build temples -->
            <div class="frame frame-20"
                 *ngIf="user.buildTemple1Allowed() == 0"
                 [ngClass]="{'level-quest': levelQuest('temple1')}"
                 data-bs-toggle="modal" data-bs-target="#Temple1Info"
                 title="{{'Build a new temple' | translate}}" >
              <ew-icon name="olympus"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.buildTemple2Allowed() == 0"
                 [ngClass]="{'level-quest': levelQuest('temple2')}"
                 data-bs-toggle="modal" data-bs-target="#Temple2Info"
                 title="{{'Build a new temple' | translate}}" >
              <ew-icon name="olympus"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.buildTemple3Allowed() == 0"
                 [ngClass]="{'level-quest': levelQuest('temple3')}"
                 data-bs-toggle="modal" data-bs-target="#Temple3Info"
                 title="{{'Build a new temple' | translate}}" >
              <ew-icon name="olympus"></ew-icon>
            </div>
            <div class="frame frame-20"
                 *ngIf="user.buildTemple4Allowed() == 0"
                 [ngClass]="{'level-quest': levelQuest('temple4')}"
                 data-bs-toggle="modal" data-bs-target="#Temple4Info"
                 title="{{'Build a new temple' | translate}}" >
              <ew-icon name="olympus"></ew-icon>
            </div>
            <div class="frame frame-20" role="button"
                 *ngIf="user.hasTemples() > 0"
                 data-bs-toggle="modal" data-bs-target="#TempleChangeInfo"
                 title="{{'Change a new temple' | translate}}" >
              <ew-icon name="olympus"></ew-icon>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-xl-6 col-block-half" *ngIf="user.getLevel() >= 1">
        <div class="card">
          <div class="card-header" translate>
            Success
          </div>
          <div class="card-body no-padding align-items-center" id="successBlock">
            <ew-icon name="{{ getDivinBonusIcon(1) }}" role="button"
                     title="{{'General' | translate }}"
                     (click)="selectSuccess(1)"
                     data-bs-toggle="modal" data-bs-target="#SuccessInfo"></ew-icon>
            <ew-icon name="{{ getDivinBonusIcon(2) }}" role="button"
                     title="{{'Constructions' | translate }}"
                     (click)="selectSuccess(2)"
                     data-bs-toggle="modal" data-bs-target="#SuccessInfo"></ew-icon>
            <ew-icon name="{{ getDivinBonusIcon(3) }}" role="button"
                     title="{{'Alliance' | translate }}"
                     (click)="selectSuccess(3)"
                     data-bs-toggle="modal" data-bs-target="#SuccessInfo"></ew-icon>
            <ew-icon name="{{ getDivinBonusIcon(5) }}" role="button"
                     title="{{'Attacks' | translate }}"
                     (click)="selectSuccess(5)"
                     data-bs-toggle="modal" data-bs-target="#SuccessInfo"></ew-icon>
            <ew-icon name="{{ getDivinBonusIcon(6) }}" role="button"
                     title="{{'Mythology' | translate }}"
                     (click)="selectSuccess(6)"
                     data-bs-toggle="modal" data-bs-target="#SuccessInfo"></ew-icon>
            <ew-icon name="{{ getDivinBonusIcon(7) }}" role="button"
                     title="{{'Feats of Strength' | translate }}"
                     (click)="selectSuccess(7)"
                     data-bs-toggle="modal" data-bs-target="#SuccessInfo"></ew-icon>
          </div>
        </div>
      </div>
      </div>
  </div>
</div>

<connected-right-menu></connected-right-menu>
<common-bottom-bar></common-bottom-bar>
